<div class="card p-1">
  <form class="card-body" [formGroup]="searchForm">
    <div class="flex items-end gap-4">
      <!-- Name or Description Input -->
      <div class="w-1/3">
        <label for="filter" class="block text-sm font-medium">Name Or Description:</label>
        <input type="text" class="form-control w-full" id="filter" formControlName="filter">
      </div>

      <!-- Category Dropdown -->
      <div class="w-1/3">
        <label class="block text-sm font-medium" for="categoryId">Category:</label>
        <select class="form-control w-full" formControlName="categoryId">
          <option [value]="-1">All</option>
          <option *ngFor="let category of categories" [value]="category.id">
            {{ category.nameEn }}
          </option>
        </select>
      </div>

      <!-- Search Button -->
      <div class="w-auto my-2">
        <button type="button" class="btn btn-primary" (click)="searchProducts()">
          Search
        </button>
      </div>
    </div>
  </form>
</div>

<button class="btn btn-secondary mb-2 px-5" (click)="addProduct()">Add Product</button>

<h2>Products List</h2>
<ngx-datatable class="material"
  [rows]="(products$ | async)?.items || []"
  [count]="(products$ | async)?.totalCount || 0"
  [columnMode]="'force'"
  [headerHeight]="50"
  [footerHeight]="50"
  [rowHeight]="50"
  [limit]="5">
  
  <ngx-datatable-column name="Name Arabic" prop="nameAr">
    <ng-template let-row="row" ngx-datatable-cell-template>
      {{ row.nameAr }}
    </ng-template>
  </ngx-datatable-column>

  <ngx-datatable-column name="Name English" prop="nameEn">
    <ng-template let-row="row" ngx-datatable-cell-template>
      {{ row.nameEn }}
    </ng-template>
  </ngx-datatable-column>

  <ngx-datatable-column name="Category English" prop="categoryNameEn">
    <ng-template let-row="row" ngx-datatable-cell-template>
      {{ row.categoryNameEn }}
    </ng-template>
  </ngx-datatable-column>

  <ngx-datatable-column name="Actions" [sortable]="false">
    <ng-template let-row="row" ngx-datatable-cell-template>
      <button class="btn btn-info btn-sm" (click)="viewProductDetails(row.id)">Details</button>
      <button class="btn btn-warning btn-sm mx-2" (click)="editProduct(row.id)">Edit</button>
      <button class="btn btn-danger btn-sm" (click)="deleteProduct(row.id)">Delete</button>
    </ng-template>
  </ngx-datatable-column>

</ngx-datatable>
